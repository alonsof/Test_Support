<?xml version="1.0" encoding="utf-8"?>
<xliff version="1.2" xsi:schemaLocation="urn:oasis:names:tc:xliff:document:1.2 xliff-core-1.2-transitional.xsd" xmlns="urn:oasis:names:tc:xliff:document:1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <file datatype="xml" source-language="en-US" target-language="zh-TW" original="file.ddue" tool-id="caps" product-name="n/a" product-version="n/a" build-num="n/a">
    <header>
      <tool tool-id="caps" tool-name="CAPS" tool-version="2.0" tool-company="Microsoft">
        <xliffext:info xsi:schemaLocation="urn:microsoft:content:schema:xliffextensions xliffext-xliffextension.xsd" xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">
          <xliffext:uhg>oQAAAB+LCAAAAAAABAANwlEKgzAMANCr9AAJNGmq7U6wAwj7bmPCBKfgHMhOvz2ee7IurGgmgkIescfSUSO1oVan1ioEz56zzRmVR0dJxNhMGaNIT6VSLzpD0IE9Djxjb2lEcRUs2Q0LmcR/ZlIIBOH7xOkB4VoXd7vO27HvJwSGIBDun1fbpqNt77Wdy779AOV0TLyhAAAA</xliffext:uhg>
        </xliffext:info>
      </tool>
    </header>
    <body>
      <group extype="metadata">
        <group id="1">
          <trans-unit id="1" translate="yes" xml:space="preserve">
            <source>Architecture</source>
            <target state="new">Architecture</target>
            <context-group>
              <context context-type="x-metadataname">toc_title</context>
            </context-group>
          </trans-unit>
        </group>
        <group id="2">
          <trans-unit id="2" translate="yes" xml:space="preserve">
            <source>Service Bus Architecture</source>
            <target state="new">Service Bus Architecture</target>
            <context-group>
              <context context-type="x-metadataname">name</context>
            </context-group>
          </trans-unit>
        </group>
      </group>
      <group extype="content">
        <group id="3">
          <trans-unit id="3" translate="yes" xml:space="preserve">
            <source>The following section discusses the message processing architecture of <ph id="1">&lt;token&gt;sb1&lt;/token&gt;</ph>.</source>
            <target state="new">The following section discusses the message processing architecture of <ph id="1">&lt;token&gt;sb1&lt;/token&gt;</ph>.</target>
          </trans-unit>
        </group>
        <group id="4">
          <trans-unit id="4" translate="yes" xml:space="preserve">
            <source>Service Bus Scale Unit</source>
            <target state="new">Service Bus Scale Unit</target>
          </trans-unit>
        </group>
        <group id="5">
          <trans-unit id="5" translate="yes" xml:space="preserve">
            <source><ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph> is organized by scale units.</source>
            <target state="new"><ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph> is organized by scale units.</target>
          </trans-unit>
          <trans-unit id="6" translate="yes" xml:space="preserve">
            <source>A scale unit is a unit of deployment and contains all components required run the service.</source>
            <target state="new">A scale unit is a unit of deployment and contains all components required run the service.</target>
          </trans-unit>
          <trans-unit id="7" translate="yes" xml:space="preserve">
            <source>Each region deploys one or more <ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph> scale units.</source>
            <target state="new">Each region deploys one or more <ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph> scale units.</target>
          </trans-unit>
        </group>
        <group id="6">
          <trans-unit id="8" translate="yes" xml:space="preserve">
            <source>A <ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph> <ph id="2">&lt;token&gt;servicensd&lt;/token&gt;</ph> is mapped to a scale unit.</source>
            <target state="new">A <ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph> <ph id="2">&lt;token&gt;servicensd&lt;/token&gt;</ph> is mapped to a scale unit.</target>
          </trans-unit>
          <trans-unit id="9" translate="yes" xml:space="preserve">
            <source>The scale unit handles all types of <ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph> entities: relays, brokered messaging entities (queues, topics, subscriptions), and notification hubs.</source>
            <target state="new">The scale unit handles all types of <ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph> entities: relays, brokered messaging entities (queues, topics, subscriptions), and notification hubs.</target>
          </trans-unit>
          <trans-unit id="10" translate="yes" xml:space="preserve">
            <source>A <ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph> scale unit consists of the following components:</source>
            <target state="new">A <ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph> scale unit consists of the following components:</target>
          </trans-unit>
        </group>
        <group id="7">
          <trans-unit id="11" translate="yes" xml:space="preserve">
            <source>A set of gateway nodes.</source>
            <target state="new">A set of gateway nodes.</target>
          </trans-unit>
          <trans-unit id="12" translate="yes" xml:space="preserve">
            <source>Gateway nodes authenticate incoming requests and handle relay requests.</source>
            <target state="new">Gateway nodes authenticate incoming requests and handle relay requests.</target>
          </trans-unit>
          <trans-unit id="13" translate="yes" xml:space="preserve">
            <source>Each gateway node has a public IP address.</source>
            <target state="new">Each gateway node has a public IP address.</target>
          </trans-unit>
        </group>
        <group id="8">
          <trans-unit id="14" translate="yes" xml:space="preserve">
            <source>A set of messaging broker nodes.</source>
            <target state="new">A set of messaging broker nodes.</target>
          </trans-unit>
          <trans-unit id="15" translate="yes" xml:space="preserve">
            <source>Messaging broker nodes process requests concerning messaging entities.</source>
            <target state="new">Messaging broker nodes process requests concerning messaging entities.</target>
          </trans-unit>
        </group>
        <group id="9">
          <trans-unit id="16" translate="yes" xml:space="preserve">
            <source>A set of notification nodes.</source>
            <target state="new">A set of notification nodes.</target>
          </trans-unit>
          <trans-unit id="17" translate="yes" xml:space="preserve">
            <source>Notification nodes send push notifications to all registered devices.</source>
            <target state="new">Notification nodes send push notifications to all registered devices.</target>
          </trans-unit>
        </group>
        <group id="10">
          <trans-unit id="18" translate="yes" xml:space="preserve">
            <source>One gateway store.</source>
            <target state="new">One gateway store.</target>
          </trans-unit>
          <trans-unit id="19" translate="yes" xml:space="preserve">
            <source>The gateway store holds the data for every entity that is defined in this scale unit.</source>
            <target state="new">The gateway store holds the data for every entity that is defined in this scale unit.</target>
          </trans-unit>
          <trans-unit id="20" translate="yes" xml:space="preserve">
            <source>The gateway store is implemented on top of a SQL Azure database.</source>
            <target state="new">The gateway store is implemented on top of a SQL Azure database.</target>
          </trans-unit>
        </group>
        <group id="11">
          <trans-unit id="21" translate="yes" xml:space="preserve">
            <source>Many messaging stores.</source>
            <target state="new">Many messaging stores.</target>
          </trans-unit>
          <trans-unit id="22" translate="yes" xml:space="preserve">
            <source>The messaging stores hold the messages of all queues, topics and subscriptions that are defined in this scale unit.</source>
            <target state="new">The messaging stores hold the messages of all queues, topics and subscriptions that are defined in this scale unit.</target>
          </trans-unit>
          <trans-unit id="23" translate="yes" xml:space="preserve">
            <source>It also contains all subscription data.</source>
            <target state="new">It also contains all subscription data.</target>
          </trans-unit>
          <trans-unit id="24" translate="yes" xml:space="preserve">
            <source>Unless <ph id="1">&lt;link xlink:href="cfbb5d64-b54e-4420-9971-436d8d820583" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;Partitioning Messaging Entities&lt;/link&gt;</ph> is enabled, a queue or topic is mapped to one messaging store.</source>
            <target state="new">Unless <ph id="1">&lt;link xlink:href="cfbb5d64-b54e-4420-9971-436d8d820583" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;Partitioning Messaging Entities&lt;/link&gt;</ph> is enabled, a queue or topic is mapped to one messaging store.</target>
          </trans-unit>
          <trans-unit id="25" translate="yes" xml:space="preserve">
            <source>Subscriptions are stored in the same messaging store as their parent topic.</source>
            <target state="new">Subscriptions are stored in the same messaging store as their parent topic.</target>
          </trans-unit>
          <trans-unit id="26" translate="yes" xml:space="preserve">
            <source>The messaging stores are implemented on top of SQL Azure databases.</source>
            <target state="new">The messaging stores are implemented on top of SQL Azure databases.</target>
          </trans-unit>
        </group>
        <group id="12">
          <trans-unit id="27" translate="yes" xml:space="preserve">
            <source>Multiple registration stores.</source>
            <target state="new">Multiple registration stores.</target>
          </trans-unit>
          <trans-unit id="28" translate="yes" xml:space="preserve">
            <source>The registration stores contain device registrations for all notification hubs that are defined in this scale unit.</source>
            <target state="new">The registration stores contain device registrations for all notification hubs that are defined in this scale unit.</target>
          </trans-unit>
          <trans-unit id="29" translate="yes" xml:space="preserve">
            <source>The registration stores are implemented on top of SQL Azure databases.</source>
            <target state="new">The registration stores are implemented on top of SQL Azure databases.</target>
          </trans-unit>
        </group>
        <group id="13">
          <trans-unit id="30" translate="yes" xml:space="preserve">
            <source>Containers</source>
            <target state="new">Containers</target>
          </trans-unit>
        </group>
        <group id="14">
          <trans-unit id="31" translate="yes" xml:space="preserve">
            <source>Each messaging entity is assigned a specific container.</source>
            <target state="new">Each messaging entity is assigned a specific container.</target>
          </trans-unit>
          <trans-unit id="32" translate="yes" xml:space="preserve">
            <source>A container is a logical construct that uses exactly one messaging store to store all relevant data for this container.</source>
            <target state="new">A container is a logical construct that uses exactly one messaging store to store all relevant data for this container.</target>
          </trans-unit>
          <trans-unit id="33" translate="yes" xml:space="preserve">
            <source>Each container is assigned to a messaging broker node.</source>
            <target state="new">Each container is assigned to a messaging broker node.</target>
          </trans-unit>
          <trans-unit id="34" translate="yes" xml:space="preserve">
            <source>Typically, there are more containers than messaging broker nodes.</source>
            <target state="new">Typically, there are more containers than messaging broker nodes.</target>
          </trans-unit>
          <trans-unit id="35" translate="yes" xml:space="preserve">
            <source>Therefore, each messaging broker node loads multiple containers.</source>
            <target state="new">Therefore, each messaging broker node loads multiple containers.</target>
          </trans-unit>
          <trans-unit id="36" translate="yes" xml:space="preserve">
            <source>The distribution of containers to messaging broker node is organized such that all messaging broker nodes are equally loaded.</source>
            <target state="new">The distribution of containers to messaging broker node is organized such that all messaging broker nodes are equally loaded.</target>
          </trans-unit>
          <trans-unit id="37" translate="yes" xml:space="preserve">
            <source>If the load pattern changes (for example, one of the containers gets very busy), or if a messaging broker node becomes temporarily unavailable, the containers are redistributed among the messaging broker nodes.</source>
            <target state="new">If the load pattern changes (for example, one of the containers gets very busy), or if a messaging broker node becomes temporarily unavailable, the containers are redistributed among the messaging broker nodes.</target>
          </trans-unit>
        </group>
        <group id="15">
          <trans-unit id="38" translate="yes" xml:space="preserve">
            <source>Processing of Incoming Messaging Requests</source>
            <target state="new">Processing of Incoming Messaging Requests</target>
          </trans-unit>
        </group>
        <group id="16">
          <trans-unit id="39" translate="yes" xml:space="preserve">
            <source>When a client sends a request to <ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph>, the Azure load balancer routes it to any of the gateway nodes.</source>
            <target state="new">When a client sends a request to <ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph>, the Azure load balancer routes it to any of the gateway nodes.</target>
          </trans-unit>
          <trans-unit id="40" translate="yes" xml:space="preserve">
            <source>The gateway node authorizes the request.</source>
            <target state="new">The gateway node authorizes the request.</target>
          </trans-unit>
          <trans-unit id="41" translate="yes" xml:space="preserve">
            <source>If the request concerns a messaging entity (queue, topic, subscription), the gateway node looks up the entity in the gateway store and determines in which messaging store the entity is located.</source>
            <target state="new">If the request concerns a messaging entity (queue, topic, subscription), the gateway node looks up the entity in the gateway store and determines in which messaging store the entity is located.</target>
          </trans-unit>
          <trans-unit id="42" translate="yes" xml:space="preserve">
            <source>It then looks up which messaging broker node is currently servicing this container, and sends the request to that messaging broker node.</source>
            <target state="new">It then looks up which messaging broker node is currently servicing this container, and sends the request to that messaging broker node.</target>
          </trans-unit>
          <trans-unit id="43" translate="yes" xml:space="preserve">
            <source>The messaging broker node processes the request and updates the entity state in the container store.</source>
            <target state="new">The messaging broker node processes the request and updates the entity state in the container store.</target>
          </trans-unit>
          <trans-unit id="44" translate="yes" xml:space="preserve">
            <source>The messaging broker node then sends the response back to the gateway node, which sends an appropriate response back to the client that issued the original request.</source>
            <target state="new">The messaging broker node then sends the response back to the gateway node, which sends an appropriate response back to the client that issued the original request.</target>
          </trans-unit>
        </group>
        <group id="17">
          <trans-unit id="45" translate="yes" xml:space="preserve">
            <source>Processing of Incoming Relay Requests</source>
            <target state="new">Processing of Incoming Relay Requests</target>
          </trans-unit>
        </group>
        <group id="18">
          <trans-unit id="46" translate="yes" xml:space="preserve">
            <source>When a client sends a request to <ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph>, the Azure load balancer routes it to any of the gateway nodes.</source>
            <target state="new">When a client sends a request to <ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph>, the Azure load balancer routes it to any of the gateway nodes.</target>
          </trans-unit>
          <trans-unit id="47" translate="yes" xml:space="preserve">
            <source>If the request is a listening request, the gateway node creates a new relay.</source>
            <target state="new">If the request is a listening request, the gateway node creates a new relay.</target>
          </trans-unit>
          <trans-unit id="48" translate="yes" xml:space="preserve">
            <source>If the request is a connection request to a specific relay, the gateway node forwards the connection request to the gateway node that owns the relay.</source>
            <target state="new">If the request is a connection request to a specific relay, the gateway node forwards the connection request to the gateway node that owns the relay.</target>
          </trans-unit>
          <trans-unit id="49" translate="yes" xml:space="preserve">
            <source>The gateway node that owns the relay sends a rendezvous request to the listening client, asking the listener to create a temporary channel to the gateway node that received the connection request.</source>
            <target state="new">The gateway node that owns the relay sends a rendezvous request to the listening client, asking the listener to create a temporary channel to the gateway node that received the connection request.</target>
          </trans-unit>
        </group>
        <group id="19">
          <trans-unit id="50" translate="yes" xml:space="preserve">
            <source>When the relay connection is established, the clients can exchange messages via the gateway node that is used for the rendezvous.</source>
            <target state="new">When the relay connection is established, the clients can exchange messages via the gateway node that is used for the rendezvous.</target>
          </trans-unit>
        </group>
        <group id="20">
          <trans-unit id="51" translate="yes" xml:space="preserve">
            <source>Processing of Incoming Notification Hub Requests</source>
            <target state="new">Processing of Incoming Notification Hub Requests</target>
          </trans-unit>
        </group>
        <group id="21">
          <trans-unit id="52" translate="yes" xml:space="preserve">
            <source>When a client sends a request to <ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph>, the Azure load balancer routes it to any of the gateway nodes.</source>
            <target state="new">When a client sends a request to <ph id="1">&lt;token&gt;sb2&lt;/token&gt;</ph>, the Azure load balancer routes it to any of the gateway nodes.</target>
          </trans-unit>
          <trans-unit id="53" translate="yes" xml:space="preserve">
            <source>If the request is a device registration for an existing notification hub, the gateway node writes the registration to the registration store and sends a reply to the calling device.</source>
            <target state="new">If the request is a device registration for an existing notification hub, the gateway node writes the registration to the registration store and sends a reply to the calling device.</target>
          </trans-unit>
          <trans-unit id="54" translate="yes" xml:space="preserve">
            <source>If the request is a notification message, the gateway node enqueues the message into a notification queue.</source>
            <target state="new">If the request is a notification message, the gateway node enqueues the message into a notification queue.</target>
          </trans-unit>
          <trans-unit id="55" translate="yes" xml:space="preserve">
            <source>One of the notification nodes dequeues the message from the notification queue and sends the message to all devices that are registered in the registration store.</source>
            <target state="new">One of the notification nodes dequeues the message from the notification queue and sends the message to all devices that are registered in the registration store.</target>
          </trans-unit>
          <trans-unit id="56" translate="yes" xml:space="preserve">
            <source>If a message is to be received by a large number of devices, multiple notification nodes participate in sending the messages to the devices.</source>
            <target state="new">If a message is to be received by a large number of devices, multiple notification nodes participate in sending the messages to the devices.</target>
          </trans-unit>
        </group>
      </group>
    </body>
  </file>
</xliff>